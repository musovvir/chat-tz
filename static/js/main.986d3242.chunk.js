(this["webpackJsonpchat-tz"]=this["webpackJsonpchat-tz"]||[]).push([[0],{47:function(e,t,s){},52:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s.n(a),n=s(8),r=s.n(n),i=s(2);var o=function(e){return Object(i.jsx)("div",{className:"header",children:Object(i.jsx)("div",{className:"header-name",children:"\u0427\u0430\u0442"})})},j=s(24),d=s.n(j);var u=function(e){return Object(i.jsx)("div",{className:"out",children:Object(i.jsxs)("div",{className:"outMessage",children:[e.message.message,Object(i.jsx)("div",{className:"date",children:d()(e.message.date).format("hh:mm")})]})})},l=s(25),m=s.n(l),b=s(26),O=s.n(b),h=s(65);var g=function(e){var t=e.message,s=e.sentMessage;return Object(i.jsx)("div",{className:"buttonSend",children:Object(i.jsx)(h.a,{timeout:100,classNames:"sendIcon",children:Object(i.jsx)("i",{className:"material-icons microphone",children:t?Object(i.jsx)(m.a,{className:"sendButton",onClick:s}):Object(i.jsx)(O.a,{className:"micIcon"})})},t)})},p=s(27),f=s.n(p);var v=function(e){return Object(i.jsx)("div",{children:Object(i.jsx)(f.a,{className:"buttonScrip"})})},x=s(11),y=s(9),N=s(5),w={loading:!1,messages:[],message:""};function I(e){return function(t){t({type:"send/message/start",payload:{message:e,date:new Date,type:"text"}}),fetch("/messages",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({message:e,date:new Date,type:"text"})}).then((function(e){return e.json()})).then((function(){t({type:"send/message/success"}),function(){var e=document.getElementById("chat-window");e&&(e.scrollTop=e.scrollHeight)}()})),t({type:"clear/input"})}}var S=s(33);var M=function(e){var t=Object(x.b)(),s=Object(x.c)((function(e){return e.chat.message})),a=function(){t(I(s))};return Object(S.a)("enter",(function(e){e.preventDefault(),a()}),[s]),Object(i.jsxs)("div",{className:"send",children:[Object(i.jsx)("input",{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435...",value:s,onChange:function(e){t(function(e){return{type:"get/message",payload:e}}(e.target.value))},className:"sendInput"}),Object(i.jsx)(v,{}),Object(i.jsx)(g,{sentMessage:a,message:(null===s||void 0===s?void 0:s.length)>0})]})};var k=function(){var e=Object(x.b)(),t=Object(x.c)((function(e){return e.chat.messages}));return Object(a.useEffect)((function(){e((function(e){e({type:"load/message/start"}),fetch("/messages").then((function(e){return e.json()})).then((function(t){e({type:"load/message/success",payload:t})}))}))}),[e]),Object(i.jsx)("div",{className:"chat",id:"chat-window",children:t.map((function(e,t){return Object(i.jsx)(u,{message:e},t)}))})};var z=function(){return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(o,{}),Object(i.jsx)(k,{}),Object(i.jsx)(M,{})]})},B=(s(47),s(32)),C=s(16),D=s(30),E=Object(B.a)({collapsed:!0,diff:!0}),J=Object(C.b)({chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"load/message/start":return Object(N.a)(Object(N.a)({},e),{},{loading:!0});case"load/message/success":return Object(N.a)(Object(N.a)({},e),{},{messages:t.payload});case"send/message/start":return Object(N.a)(Object(N.a)({},e),{},{messages:[].concat(Object(y.a)(e.messages),[t.payload])});case"get/message":return Object(N.a)(Object(N.a)({},e),{},{message:t.payload});case"clear/input":return Object(N.a)(Object(N.a)({},e),{},{message:""});default:return e}}}),T=Object(C.c)(J,Object(C.a)(D.a,E)),A=s(31);r.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(A.a,{basename:"/chat-tz",children:Object(i.jsx)(x.a,{store:T,children:Object(i.jsx)(z,{})})})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.986d3242.chunk.js.map